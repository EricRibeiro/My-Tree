<?php

$url = $this->url('investidor', ['controller' => 'campanha', 'action' => 'cadastrar']);

?>

<div class="col-lg-12 col-md-12">
    <div class="card">
        <div class="header">
            <h4 class="title">Campanhas cadastradas</h4>
        </div>
        <div class="content">       
            <div class="row">
                <div class="col-md-12">
                    <table id="locais" class="table table-hover display" style="width:100%">
                        <thead>
                            <tr>
                                <th>Nome</th>
                                <th>data Início</th>
                                <th>data Término</th>
                                <th>Cidade</th>
                                <th>Estado</th>
                                <th>Local</th>
                                <th>Ações</th>
                            </tr>
                        </thead>

                        <tbody>

                            <?php foreach ($campanhas as $campanha) { ?>
                            <tr>

                                <td><?= $campanha->getNome(); ?></td>
                                <td><?= $campanha->getDataIncialString(); ?></td>
                                <td><?= $campanha->getDataFinalString(); ?></td>
                                
                                <?php if($campanha->getLocal()!=null) {?>
                                    <td><?= $campanha->getLocal()->getMunicipio(); ?></td> 
                                    <td><?= $campanha->getLocal()->getUF(); ?></td>
                                 <?php }?>

                                <?php if($campanha->getLocal()==null) {?>                               
                                    <td></td>
                                    <td></td>
                                <?php }?>

                                <td></td>
                                <td>
                                    <a href="<?= $this->url('investidor', [ 'controller'=>'campanha','action' => 'remover', 'id' => $campanha->getId()]) ?>"
                                     class="btn btn-danger btn-fill">
                                     <i class="fa fa-trash" aria-hidden="true" type="hidden"></i>
                                 </a>

                                 <a type="button"
                                 href="<?= $this->url('investidor', [ 'controller'=>'campanha','action' => 'editar', 'id' => $campanha->getId()]) ?>"
                                 class="btn btn-info btn-fill">
                                 <i class="fa fa-pencil" aria-hidden="true"></i>
                             </a>
                         </td>
                     </tr>
                     <?php }?>
                 </tbody>
             </table>
         </div>
     </div>
 </div>
</div>
</div>
<script>
    jQuery(function ($) {
        $('#locais').DataTable( {
            columnDefs: [ {
                orderable: false,
                className: 'dt-center',
                targets:   0
            } ],
            select: {
                style:    'os',
                selector: 'td:first-child'
            },
            order: [[ 1, 'asc' ]],
            paging:true
        } );
    });

</script>

<script>

</script>



